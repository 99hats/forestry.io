{{- $tweets := cond (isset . "tweets") .tweets $.Site.Data.tweets -}}
{{- $page := cond (isset . "page") .page . -}}
<section class="section-testimonials" onclick="void(0)">
  {{- range $index, $row := $tweets -}}
    {{- template "row" (dict "page" $page "index" $index "row" $row) -}}
  {{- end -}}
</section>
{{- define "row" -}}
<div class="testimonials-row row-{{ .index | add 1 }}">
  <div class="testimonials-row--items">
    <div class="testimonials-row--wrapper">
      {{- range .row -}}
        {{- template "tweet" (dict "page" $.page "tweet" .) -}}
      {{- end -}}
    </div>
  </div>
  <div class="testimonials-row--items">
    <div class="testimonials-row--wrapper">
      {{- range .row -}}
        {{- template "tweet" (dict "page" $.page "tweet" .) -}}
      {{- end -}}
    </div>
  </div>
</div>
{{- end -}}
{{- define "tweet" }}
  {{- with .tweet -}}
  <a href="{{ .permalink }}" target="_blank" class="testimonial-card">
    <div class="meta">
      <div class="avatar">
        {{ partial "cloudinary/image" (dict "page" $.page "image" .avatar "alt" (printf "%s%s" "Photo of " .name)) }}
      </div>
      <div class="user-info">
        <span class="name">{{ .name }}</span>
        <span class="username">{{ .username }}</span>
      </div>
      <div class="platform">
        <img src="/img/logos/Twitter.svg" alt="Twitter">
      </div>
    </div>
    <div class="content">
      <p>{{ .textline }}</p>
    </div>
  </a>
  {{- end -}}
{{- end -}}
